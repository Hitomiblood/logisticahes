FROM rclone/rclone:latest

# Instalar cron
RUN apk add --no-cache bash dcron

# Copiar script de sincronizaciÃ³n
COPY rclone/sync.sh /scripts/sync.sh
RUN chmod +x /scripts/sync.sh

# Crear directorio de datos
RUN mkdir -p /data/transporte

# Configurar cron para sincronizar cada 5 minutos
RUN echo "*/5 * * * * /scripts/sync.sh" > /etc/crontabs/root

# Script de inicio
COPY rclone/entrypoint.sh /entrypoint.sh
RUN chmod +x /entrypoint.sh

ENTRYPOINT ["/entrypoint.sh"]
